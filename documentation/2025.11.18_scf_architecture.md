# SCF-Centric Architecture Implementation

**Date:** November 18, 2025  
**Status:** Foundation Complete  
**Author:** System Architect

## Overview

This document describes the complete redesign of the GRC Unified Platform to use the **Secure Controls Framework (SCF)** as the central hub for all governance, risk, and compliance operations, following the **Integrated Controls Management (ICM)** model and incorporating the **Cybersecurity & Privacy Risk Management Model (C|P-RMM)** and **Capability Maturity Model (C|P-CMM)**.

## Architecture Philosophy

### SCF as the Central Hub

The platform now positions **SCF controls** as the central entity to which all other GRC components connect:

```
                    ┌─────────────────┐
                    │  SCF Controls   │
                    │  (Central Hub)  │
                    └────────┬────────┘
                             │
        ┌────────────────────┼────────────────────┐
        │                    │                    │
   ┌────▼────┐         ┌────▼────┐         ┌────▼────┐
   │Obligations│        │  Risks   │        │ Assets  │
   │Requirements│       │ Threats  │        │ PPTDF   │
   └────┬────┘         └────┬────┘         └────┬────┘
        │                    │                    │
        └────────────────────┼────────────────────┘
                             │
        ┌────────────────────┼────────────────────┐
        │                    │                    │
   ┌────▼────┐         ┌────▼────┐         ┌────▼────┐
   │Policies │         │Assessments│        │Maturity │
   │Standards│         │ Evidence  │        │C|P-CMM  │
   │Procedures│        │ Findings  │        │ L0-L5   │
   └─────────┘         └───────────┘        └─────────┘
```

### Key Differences from Original Design

| Aspect | Original Design | SCF-Centric Design |
|--------|----------------|-------------------|
| **Control Model** | Generic "regulations" table | Dedicated `scf_controls` table with SCF-specific properties |
| **Framework Mapping** | Peer-to-peer crosswalks | External frameworks map **TO** SCF controls |
| **Requirements** | Not modeled | Obligations → Requirements → SCF Controls (MCR/DSR) |
| **Maturity** | Not implemented | C|P-CMM L0-L5 maturity tracking per control |
| **Risk Model** | Basic | C|P-RMM 17-step process with IE, OL, inherent/residual risk |
| **Assets** | Not modeled | PPTDF-categorized assets linked to controls |
| **Assessments** | Not modeled | Full AO/ERL/Findings workflow |
| **PPTDF** | Not implemented | People/Process/Technology/Data/Facility applicability |

## Core Components

### 1. SCF Controls (scf_controls)

The `scf_controls` table is the foundation of the entire system:

**Key Fields:**
- `control_id`: SCF identifier (e.g., GOV-01, IAC-02)
- `title`, `description`, `domain`: Control details
- `weight`, `is_material_control`: Materiality assessment
- `is_mcr`, `is_dsr`: MCR (Minimum Compliance Requirement) vs DSR (Discretionary Security Requirement)
- `applicability_*`: PPTDF flags (people, processes, technology, data, facilities)
- `scf_version`: SCF version tracking

**Purpose:** 
- Central catalog of all security and privacy controls
- Reference point for policies, risks, assessments, and maturity
- Supports control weighting and materiality analysis

### 2. Obligations & Requirements

**Model:**
```
Obligations (Laws, Regulations, Contracts)
    ↓
Requirements (Specific clauses)
    ↓
Control Requirements (Mapping)
    ↓
SCF Controls (Tagged as MCR or DSR)
```

**Purpose:**
- Track legal, regulatory, and contractual drivers
- Distinguish between mandatory (MCR) and discretionary (DSR) controls
- Support compliance mapping and gap analysis

### 3. External Framework Mappings

**Architecture:**
- `frameworks`: Catalog of external frameworks (ISO 27001, NIST CSF, SOC2, PCI-DSS, etc.)
- `external_controls`: Individual control requirements from those frameworks
- `scf_control_mappings`: Maps external controls **TO** SCF controls (unidirectional)

**Purpose:**
- SCF serves as the common language/hub
- All external frameworks are mapped through SCF
- Enables transitive mapping (ISO ↔ SCF ↔ NIST)

### 4. PPTDF Model (People, Processes, Technology, Data, Facilities)

**Implementation:**
- Boolean flags on `scf_controls` for applicability
- `asset_type` enum on `assets` table
- Enables scoping of controls and risks by PPTDF category

**Purpose:**
- Categorize controls by what they protect/govern
- Scope assessments and risks by asset type
- Support organizational structure alignment

### 5. Risk Management (C|P-RMM)

**17-Step C|P-RMM Process Support:**

The schema implements the full C|P-RMM methodology:

- **Steps 1-3**: Configuration (program setup, dependencies)
- **Steps 4-6**: Catalog management (`risks`, `threats`, `scf_controls`)
- **Step 7**: Maturity targets (`maturity_targets`)
- **Steps 8-11**: Assessment engine (`assessments`, `assessment_objectives`, `evidence_items`, `findings`)
- **Step 12**: Risk exposure calculation (`impact_effect`, `occurrence_likelihood`, `inherent_risk_score`, `residual_risk_score`)
- **Steps 13-14**: Prioritization & reporting (`conformity_reports`)
- **Steps 15-17**: Governance & treatment (`risk_treatments`, `poam_tasks`)

**Key Risk Fields:**
- `impact_effect` (IE): Impact magnitude
- `occurrence_likelihood` (OL): Likelihood score
- `inherent_risk_score`: Pre-control risk (IE × OL)
- `residual_risk_score`: Post-control risk
- `risk_tolerance_band`: Acceptable risk level
- `risk_threshold`: Decision trigger points

### 6. Maturity Model (C|P-CMM)

**Levels:**
- **L0**: Not Performed
- **L1**: Performed Informally
- **L2**: Planned & Tracked
- **L3**: Well Defined
- **L4**: Quantitatively Controlled
- **L5**: Continuously Improving

**Tables:**
- `maturity_targets`: Target maturity per control/domain/org
- `maturity_assessments`: Actual assessed maturity
- `negligence_threshold`: Minimum acceptable maturity level

**Purpose:**
- Track governance quality independent of control effectiveness
- Identify maturity gaps and negligence risk
- Drive continuous improvement initiatives

### 7. Assessment Framework

**Workflow:**
```
Assessment Campaign
    ↓
Assessment Objectives (AOs) per Control
    ↓
Evidence Collection (ERL - Evidence Request List)
    ↓
Findings (Observations, Deficiencies, Weaknesses)
    ↓
Conformity Reports (Strictly Conforms → Material Weakness)
```

**Rigor Levels:**
- **L1**: Standard assessment
- **L2**: Enhanced assessment
- **L3**: Comprehensive assessment

**Conformity Status:**
- Strictly Conforms
- Conforms
- Significant Deficiency
- Material Weakness

### 8. Policies, Standards, & Procedures

**Three-Tier Structure:**
- `policy_statements`: High-level intent and direction
- `standard_statements`: Specific "shall/should" requirements
- `procedures`: Step-by-step instructions (SOPs)

All linked to SCF controls via junction tables.

**Purpose:**
- Implement controls through formal documentation
- Track ownership and review cycles
- Support audit and compliance evidence

### 9. Assets

**PPTDF-Categorized:**
- People assets (roles, teams)
- Process assets (workflows, procedures)
- Technology assets (systems, applications)
- Data assets (databases, datasets)
- Facility assets (locations, physical infrastructure)

**Relationships:**
- Assets linked to controls (`asset_controls`)
- Assets linked to risks (`risks.primary_asset_id`)

### 10. Risk Treatment & POA&M

**Risk Treatment Decisions:**
- **Reduce**: Implement controls to lower risk
- **Avoid**: Eliminate the activity causing risk
- **Transfer**: Shift risk to third party (insurance, outsourcing)
- **Accept**: Acknowledge and monitor risk

**POA&M (Plan of Action & Milestones):**
- Task tracking for risk remediation
- Links to findings, controls, and treatments
- Priority and due date management

## Implementation Views

The schema includes three analytical views:

### v_control_coverage
Shows coverage statistics per SCF control:
- Policy, standard, procedure counts
- Asset coverage
- Risk associations

### v_risk_exposure
Risk register summary with:
- Inherent vs residual risk scores
- Treatment decisions
- Mitigating control counts

### v_maturity_gaps
Maturity gap analysis:
- Target vs assessed maturity
- Negligence threshold violations
- Gap status (CRITICAL, GAP, MEETS_TARGET, NOT_ASSESSED)

## Integration with ICM PDCA Loop

### Plan
- Define obligations and requirements
- Tailor SCF controls (MCR/DSR)
- Set maturity targets
- Define risk appetite

### Do
- Implement controls via policies/standards/procedures
- Assign ownership
- Deploy technology controls
- Execute BAU operations

### Check
- Run assessments with evidence collection
- Calculate maturity ratings
- Update risk scores
- Monitor KPIs/KRIs

### Act
- Prioritize findings
- Create POA&M tasks
- Make risk treatment decisions
- Implement remediation
- Continuous improvement

## Migration from Original Schema

### Tables to Deprecate
- `regulations` → Use `external_controls`
- `policies` → Use `policy_statements`
- `policy_regulations` → Use `control_policies` + `control_requirements`
- `framework_crosswalks` → Use `scf_control_mappings`

### Tables to Retain
- `organizations`
- `users`
- `organization_members`
- `frameworks`
- `regulatory_events`

### New Tables (41 total)
See `database/scf_schema.sql` for complete list.

## Data Population Strategy

### Phase 1: Core SCF Controls
1. Import official SCF control catalog
2. Tag controls with PPTDF applicability
3. Classify controls as MCR/DSR based on obligations
4. Set control weights and materiality flags

### Phase 2: Obligations & Requirements
1. Import applicable laws and regulations
2. Break down into specific requirements
3. Map requirements to SCF controls
4. Tag MCR-driving requirements

### Phase 3: External Frameworks
1. Import framework catalogs (ISO 27001, NIST CSF, etc.)
2. Create mappings to SCF controls
3. Validate mapping strength and confidence

### Phase 4: Operational Data
1. Define maturity targets per control
2. Create initial risk catalog
3. Link assets to controls
4. Document existing policies/standards/procedures

## Future Enhancements

### Short Term
- RLS policy implementation for multi-tenancy
- Seed data scripts for SCF control catalog
- API layer for CRUD operations
- Dashboard components for key views

### Medium Term
- Automated risk scoring calculations
- ML-assisted control mapping
- Real-time compliance monitoring
- Integration APIs for evidence collection

### Long Term
- Predictive risk analytics
- Automated control testing
- Third-party risk management integration
- Regulatory intelligence AI

## References

- **SCF**: Secure Controls Framework (securecontrolsframework.com)
- **ICM**: Integrated Controls Management white paper
- **C|P-RMM**: Cybersecurity & Privacy Risk Management Model
- **C|P-CMM**: Cybersecurity & Privacy Capability Maturity Model

## Change Log

- **2025.11.18**: Initial SCF-centric architecture design
- **2025.11.18**: Complete schema redesign (41 new tables)
- **2025.11.18**: TypeScript types generated
- **2025.11.18**: Architecture documentation created

---

**Next Steps:**
1. Apply schema to Supabase migration
2. Update frontend components to use SCF model
3. Create seed data for SCF control catalog
4. Build initial dashboard views
5. Implement RLS policies
