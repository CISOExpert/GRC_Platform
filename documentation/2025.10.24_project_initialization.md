# Project Initialization - October 24, 2025

## Summary
Initial setup and scaffolding for the GRC Unified Platform using Option 1 stack (Next.js + Supabase).

## Changes Made

### Documentation
- Updated `README.md` with comprehensive architecture overview
- Updated `ToDo.md` with phased roadmap (Foundation, Core Mapping, Reporting, Advanced)

### Frontend Setup
- Initialized Next.js 14 with TypeScript, Tailwind CSS, App Router, ESLint
- Installed core dependencies:
  - `@supabase/supabase-js` (Supabase client SDK)
  - `@tanstack/react-query` (server state management)
  - `zustand` (lightweight client state)

### Database Schema
- Created `database/schema.sql` with initial tables:
  - `organizations` (hierarchical multi-tenancy with self-referencing parent_id)
  - `users` (profile extension of Supabase auth.users)
  - `organization_members` (role mapping: admin/manager)
  - `frameworks` (compliance frameworks like ISO 27001, SOC2)
  - `regulations` (granular control statements within frameworks)
  - `policies` (internal organizational policies)
  - `policy_regulations` (mapping between policies and regulations)
  - `framework_crosswalks` (inter-framework control mappings)
  - `regulatory_events` (future regulatory intelligence tracking)
- Added RLS enablement placeholders (policies to be implemented)
- Added indexes for performance optimization

## Technology Stack Confirmed
- **Frontend**: Next.js 14 + TypeScript + Tailwind CSS
- **Backend**: Supabase (self-hosted initially)
- **Database**: PostgreSQL with Row Level Security
- **State Management**: React Query + Zustand
- **Auth**: Supabase Auth

## Multi-Tenancy Approach
- Logical separation via `parent_id` foreign key in organizations table
- Manager role: access to assigned org + all descendant orgs (no upward traversal)
- Admin role: global access across all orgs
- RLS policies will enforce row-level filtering based on user session

## Node Version Notice
⚠️ Next.js 16 requires Node.js >= 20.9.0. Current system is running Node v18.17.0.
- Project initialized successfully with warnings
- **Action Required**: Upgrade Node.js to v20.9.0+ for optimal compatibility

## Next Steps (Phase 1 - Foundation)
1. Upgrade Node.js environment
2. Initialize Supabase local instance (`brew install supabase/tap/supabase`)
3. Apply database schema to Supabase
4. Create Supabase configuration and environment variables
5. Build basic authentication flow
6. Create organization context selector component
7. Implement first CRUD interface (frameworks or organizations)

## Supabase: Self-Hosted vs Managed
**Self-Hosted (Current Choice)**:
- Full feature parity for development
- Direct control over data, backups, retention
- No vendor lock-in for internal testing
- Manual configuration needed for email/SMS providers
- Simpler for single-team internal use

**Managed (Future Option)**:
- Automatic scaling, monitoring, upgrades
- Built-in high availability & failover
- Managed backups and point-in-time recovery
- Premium support and SLA guarantees

**Decision**: Start self-hosted locally, migrate to managed or AWS-hosted production deployment when scale/availability requirements grow.

---
*Document created: October 24, 2025*
